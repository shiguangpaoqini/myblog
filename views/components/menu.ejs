<div class="ui grid">
  <div class="four wide column"></div>
  <div class="eight wide column">
    <div class="ui small menu">
      <!-- 懒得做了，要再加个字段-->
      <div class="ui dropdown item disabled" id="sort">
        <span>按时间排序</span> <i class="dropdown icon"></i>
        <div class="menu" id="sortMenu">
          <a class="item">按时间排序</a>
          <a class="item">按浏览量排序</a>
        </div>
      </div>
      <div class="ui dropdown item">分类 <i class="dropdown icon"></i>
        <div class="menu" id="typeMenu">
          <a class="item">随笔</a>
          <a class="item">学习</a>
          <a class="item">生活</a>
        </div>
      </div>
      <div class="right menu">
        <div class="ui action input">
          <input placeholder="Search..." type="text" id="key">
          <button class="ui icon button" id="serach">
            <i class="search icon"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $().ready(function() {
    $('#serach').click(function () {
      var key = $('#key').val();
      if("<%= key %>" === "<%= author %>" === "<%= page %>" === "<%= type %>" === ""){
        window.location.search = ""
      }else {
        window.location.search = "?author=<%= author %>&type=<%= type %>&key="+key+"&page=1"
      }
    })

    $('#key').keydown(function (ev) {
      if(ev.keyCode == 13){
        $('#serach').click();
      }
    })

    $('#typeMenu .item').click(function () {
      var type = $(this).html()
      if("<%= key %>" === "<%= author %>" === "<%= page %>" === "<%= type %>" === ""){
        window.location.search = ""
      }else {
        window.location.search = "?author=<%= author %>&type="+type+"&key=<%= key %>&page=1"
      }
    })

    $('#sortMenu .item').click(function () {
      $('#sort span').html($(this).html())
      var sort = '_id'
      if(this.html()==='按浏览量排序'){
        sort = 'pv'
      }

    })
  })
</script>
